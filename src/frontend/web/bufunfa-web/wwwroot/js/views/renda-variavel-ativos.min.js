var RendaVariavelAtivos=function(){var n=function(n){$.get(App.corrigirPathRota("/renda-variavel/listar-ativos?tipo="+n),function(r){n=="DIV"?(App.desbloquear($("#portlet-dividendos")),$("#divValorDividendos").html(r),App.aplicarTabelaSelecionavel("#table-dividendos")):(App.desbloquear($("#portlet-fii")),$("#divFiis").html(r),App.aplicarTabelaSelecionavel("#table-fii"));$("button[class*='detalhar-ativo-"+n.toLowerCase()+"']").each(function(){let n=$(this).data("id-conta");$(this).click(function(){Bufunfa.exibirAcao(n)})});$("button[class*='alterar-ativo-"+n.toLowerCase()+"']").each(function(){let n=$(this).data("id-conta"),i=$(this).data("tipo");$(this).click(function(){t(n,i)})});$("button[class*='excluir-ativo-"+n.toLowerCase()+"']").each(function(){let n=$(this).data("id-conta"),t=$(this).data("tipo");$(this).click(function(){AppModal.exibirConfirmacao("Deseja realmente excluir esse ativo?","Sim","NÃ£o",function(){i(n,t)})})})}).done(function(){KTApp.initTooltips()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})},t=function(t){let i=t===null||t===undefined||t===0;AppModal.exibirPorRota(i?App.corrigirPathRota("/renda-variavel/cadastrar-ativo"):App.corrigirPathRota("/renda-variavel/alterar-ativo?id="+t),function(){$("#form-manter-conta").validate({rules:{iNome:{required:!0},sTipo:{required:!0}},submitHandler:function(){let t={Id:$("#iIdConta").val(),Nome:$("#iNome").val(),Tipo:$("#sTipo").val(),ValorSaldoInicial:$("#iSaldoInicial").val(),NomeInstituicao:$("#iNomeInstituicao").val(),Numero:$("#iNumero").val(),NumeroAgencia:$("#iNumeroAgencia").val(),Ranking:$("#iRanking").length?$("#iRanking").val():null};$.post(App.corrigirPathRota(i?"/contas/cadastrar-conta":"/contas/alterar-conta"),{entrada:t}).done(function(i){let r=Feedback.converter(i);r.tipo=="SUCESSO"?(AppModal.ocultar(),r.exibir(function(){n(t.Tipo=="4"?"DIV":"FII")})):r.exibir()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})}});$("#sTipo").select2({allowClear:!1,placeholder:"Selecione um tipo",dropdownParent:$(".jc-bs3-container"),minimumResultsForSearch:-1}).on("change",function(){$(this).valid()});$("#iRanking").inputmask({mask:"9",repeat:2,greedy:!1})})},i=function(t,i){$.post(App.corrigirPathRota("/renda-variavel/excluir-ativo?id="+t),function(t){let r=Feedback.converter(t);r.tipo=="SUCESSO"&&n(i);r.exibir()}).fail(function(n){let t=Feedback.converter(n.responseJSON);t.exibir()})};return{init:function(){n("DIV");n("FII");$("#btn-cadastrar-renda-variavel").click(function(){t()})},atualizar:function(){n("DIV");n("FII")}}}();jQuery(document).ready(function(){RendaVariavelAtivos.init()});